(this["webpackJsonprancid-tomatillos"]=this["webpackJsonprancid-tomatillos"]||[]).push([[0],{30:function(e,t,n){},32:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n(0),i=n.n(c),r=n(21),a=n.n(r),o=(n(30),n(7)),l=n.n(o),u=n(11),j=n(12),d=n(13),h=n(15),v=n(14),m=function(e){return fetch("https://rancid-tomatillos.herokuapp.com/api/v2/movies/".concat(e)).then((function(e){return e.json()}))},b=n(24),p=(n(32),n(8)),f=function(e){var t=e.image,n=e.id,r=e.isSinglePoster,a=Object(c.useState)({}),o=Object(b.a)(a,2),j=o[0],d=o[1];Object(c.useEffect)((function(){Object.keys(j).length||h()}));var h=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(n);case 2:t=e.sent,d(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.jsxs)("article",{className:"movie-info",children:[Object(s.jsx)(p.b,{to:"/".concat(n),children:Object(s.jsx)("img",{alt:"movie poster",className:!0===r?"locked-poster":"poster",src:t})}),!0===r&&function(){window.scrollTo(0,0);var e=j.movie;return Object(s.jsx)("section",{className:"movie-info movie-info-background",children:e&&Object.keys(e).length&&Object(s.jsxs)(i.a.Fragment,{children:[Object(s.jsx)("p",{children:e.title}),Object(s.jsxs)("p",{children:["Average Rating: ",e.average_rating.toFixed(1)]}),Object(s.jsxs)("p",{children:["Release Date: ",e.release_date]}),Object(s.jsxs)("p",{children:["Overview: ",e.overview]}),Object(s.jsxs)("p",{children:["Genre(s): ",e.genres.map((function(t,n){return e.genres.length===n+1?"and ".concat(t):"".concat(t,", ")}))]}),Object(s.jsxs)("p",{children:["Runtime: ",e.runtime," minutes"]}),Object(s.jsx)(p.b,{to:"/",children:Object(s.jsx)("button",{className:"go-back-btn",to:"/",children:"Go Back"})})]})})}()]})},O=(n(38),function(e){var t=e.movies,n=e.isSinglePoster,c=e.selectedMovie,i=e.syncMovieId,r=t.map((function(e){return Object(s.jsx)(f,{image:e.poster_path,"aria-label":"movie",id:e.id,isSinglePoster:n,selectedMovie:c,syncMovieId:i},e.id)}));return Object(s.jsxs)("section",{children:[Object(s.jsx)("h2",{className:"movies-section-title",children:"Movies"}),Object(s.jsx)("article",{"data-testid":"movies-container",className:1===t.length?"single-poster":"movie-posters-container",children:r})]})}),x=(n(39),n(2)),g=n(23),M=(n(40),function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var s;return Object(j.a)(this,n),(s=t.call(this,e)).handleInput=function(e){s.setState(Object(g.a)({},e.target.name,e.target.value))},s.filterMovies=function(e){e.preventDefault();var t=s.props.movies.filter((function(e){return e.title.toUpperCase()===s.state.title.toUpperCase()}));t.length>0?(s.props.getFilteredMovies(t),s.clearInputs(),s.setState({unMatchedResult:!1})):s.setState({unMatchedResult:!0})},s.clearInputs=function(){s.setState({title:""})},s.state={title:"",unMatchedResult:!1},s}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return Object(s.jsxs)("section",{className:"searched-movies-container",children:[Object(s.jsxs)("form",{className:"search-form",children:[Object(s.jsx)("input",{className:"title-search-bar",type:"text",placeholder:"Movie",name:"title",value:this.state.title,onChange:function(t){return e.handleInput(t)}}),Object(s.jsx)("button",{className:"title-search-button",onClick:function(t){return e.filterMovies(t)},children:"SEARCH \ud83d\udd0d"})]}),!0===this.state.unMatchedResult&&Object(s.jsx)("p",{className:"error-message",children:"Sorry, no title matches your search. Try searching for another movie."})]})}}]),n}(c.Component)),S=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(){var e;return Object(j.a)(this,n),(e=t.call(this)).componentDidMount=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://rancid-tomatillos.herokuapp.com/api/v2/movies").then((function(e){return e.json()})).then((function(t){return e.setState({movies:t.movies})})).catch((function(e){return console.log(e)}));case 2:case"end":return t.stop()}}),t)}))),e.singleMovieFetch=function(){var t=Object(u.a)(l.a.mark((function t(n){var s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(n);case 2:s=t.sent,e.setState({selectedMovie:s});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getFilteredMovies=function(t){e.setState({movies:t})},e.state={movies:[],selectedMovie:{},isSinglePoster:!1},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return Object(s.jsxs)("section",{children:[Object(s.jsx)("h1",{className:"page-title",children:"Rancid Tomatillos"}),Object(s.jsxs)(x.c,{children:[Object(s.jsx)(x.a,{exact:!0,path:"/",render:function(){return Object(s.jsxs)("section",{children:[Object(s.jsx)(M,{movies:e.state.movies,getFilteredMovies:e.getFilteredMovies}),Object(s.jsx)(O,{movies:e.state.movies,findPoster:e.findPoster,isSinglePoster:e.state.isSinglePoster})]})}}),Object(s.jsx)(x.a,{exact:!0,path:"/:id",render:function(t){var n=t.match,c=parseInt(n.params.id),i=e.state.movies.filter((function(e){return e.id===parseInt(n.params.id)}));return i.length>0?Object(s.jsx)(O,{movies:i,isSinglePoster:!0,movieId:c,selectedMovie:e.state.selectedMovie,syncMovieId:e.singleMovieFetch}):Object(s.jsxs)("article",{children:[Object(s.jsx)("p",{children:"Sorry, no poster found with that id!"}),Object(s.jsx)(p.b,{to:"/",children:Object(s.jsx)("button",{className:"go-back-btn",to:"/",children:"Go Back"})})]})}})]})]})}}]),n}(c.Component),k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,42)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),s(e),c(e),i(e),r(e)}))},y=Object(s.jsxs)(p.a,{basename:"/rancid-tomatillos",children:[" ",Object(s.jsx)(S,{})," "]});a.a.render(y,document.getElementById("root")),k()}},[[41,1,2]]]);
//# sourceMappingURL=main.81e560e7.chunk.js.map